# Phase 03: 编译与测试体系

> **前置条件**：Phase 02 已完成（或从 [Workflow.md](1-code-cognition/Workflow.md) 决策树 Q3 为「否」直接进入），或由 Phase 02 验证步骤触发提前执行  
> **目标**：梳理编译系统、单元测试体系及测试运行方式，并文档化

---

## 提前执行说明

**本阶段可在 Phase 02 验证步骤需要时提前执行。**

当 Phase 02 中的模块验证（Skill 02 任务 2.5）需要运行测试来验证高复杂度模块时，若构建与测试体系尚未文档化，应先跳转执行本阶段，完成后返回 Phase 02 继续验证。

提前执行流程：

1. Phase 02 识别到高复杂度模块需要验证
2. 检查构建与测试是否已文档化（Q3 判断）
3. 若否，暂停 Phase 02，执行 Phase 03
4. Phase 03 完成后，返回 Phase 02 继续执行验证任务

---

## 进入条件

- 从 [Workflow.md](1-code-cognition/Workflow.md) 入口决策树判断 Q3 为「否」（构建与测试未文档化或不可执行）
- 或 Phase 02 已完成，需执行构建与测试分析
- 或 Phase 02 验证步骤需要构建环境，触发提前执行

---

## 执行指令

**加载 Skill**：阅读并执行 → [Skill 03: 构建与测试体系](1-code-cognition/skills/skill-03-build-tests.md)

---

## 阶段验收标准

在 Skill 03 完成后，验证以下条件全部满足：

### 必须满足

- [ ] **构建与测试文档存在**

  ```bash
  [ -f docs/codearch/build_and_tests.md ] && echo "PASS" || echo "FAIL"
  ```

- [ ] **文档包含**：

  - [ ] 编译系统说明（类型、主入口、至少一条构建命令）
  - [ ] 单元测试说明（有则写框架与运行方式，无则写明「当前无单元测试体系」）
  - [ ] 运行测试的方式（命令或说明「无测试可运行」）

- [ ] **所列构建/测试命令可执行**（在工程根目录执行文档中的命令，构建或测试返回 0 或文档已说明当前不可用原因）

### 可选

- [ ] 包含不同配置（Debug/Release）或平台的构建说明
- [ ] 包含测试过滤或按 target 运行的说明

---

## 阶段产出物

| 产出           | 路径                               | 说明                             |
| -------------- | ---------------------------------- | -------------------------------- |
| 构建与测试说明 | `docs/codearch/build_and_tests.md` | 编译系统、单元测试体系、运行方式 |

---

## 完成后跳转

| 验收结果         | 下一步                                                               |
| ---------------- | -------------------------------------------------------------------- |
| 通过（正常流程） | 进入 [Phase 04: 报告产出与引用](04-reports.md) 做最终汇总与引用校验  |
| 通过（提前执行） | 返回 [Phase 02](02-modules.md) 继续执行模块验证（Skill 02 任务 2.5） |
| 未通过           | 返回 Skill 03 补全文档后重新验收                                     |

---

## 时间预估

| 工程规模 | 预估时间   |
| -------- | ---------- |
| 小型     | 20–40 分钟 |
| 中型     | 40–90 分钟 |
| 大型     | 1–2 小时   |

---

**执行**：立即加载 [Skill 03](1-code-cognition/skills/skill-03-build-tests.md) 开始执行
