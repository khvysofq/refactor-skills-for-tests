# 模块报告模板

> **用途**：记录单个模块的架构分析结果（职责、边界、依赖、复杂度、使用示例）  
> **位置**：`docs/codearch/modules/<module_name>.md`

---

## 使用说明

1. 每个模块一份独立文件，文件名与模块标识一致（如 `core_utils.md`、`io_file.md`）。
2. 由 Phase 02 / Skill 02 填写；复杂度评级时参阅 [complexity_levels](1-code-cognition/definitions/complexity_levels.md)；验证时参阅 [validation_levels](1-code-cognition/definitions/validation_levels.md)。
3. 保持纯架构分析，不包含可测试性状态（S1–S4）等重构专用字段。
4. 「信息来源」记录分析依据；「使用示例」必须填写至少一个基本用法；「验证状态」复杂度 ≥ 高时必填。
5. 「代码特征」为必填章节，记录客观技术特征（是/否 + 简要说明），为下游风险分析提供索引。
6. 「关键代码位置索引」记录主要入口点，便于快速定位代码。

---

## 模板

````markdown
# 模块: <module_name>

> 路径: <src/path/to/module/>
> 类型: [库 / 服务 / 驱动 / 工具 / 其他]

---

## 职责描述

<一段话描述该模块的核心职责>

---

## 边界

### 输入

- <输入类型或接口>: <描述>
- <输入类型或接口>: <描述>

### 输出

- <输出类型或接口>: <描述>
- <输出类型或接口>: <描述>

---

## 依赖

### 内部依赖

| 模块       | 说明             |
| ---------- | ---------------- |
| <module_x> | <依赖方式或用途> |
| <module_y> | <依赖方式或用途> |

### 外部依赖

| 类型      | 位置/示例         | 用途   |
| --------- | ----------------- | ------ |
| 文件系统  | <文件/行号或示例> | <用途> |
| 网络      | <同上>            | <用途> |
| 时间/随机 | <同上>            | <用途> |
| 线程/并发 | <同上>            | <用途> |
| 其他      | <同上>            | <用途> |

---

## 复杂度评级

- **等级**: [低 / 中 / 高 / 极高]
- **依据**: <可选，一句话说明，如「依赖 6 个内部模块 + 文件与网络 I/O」>

---

## 关键设计要点

<建议 3–5 条，供后续代码审查与重构 Agent 快速建立上下文>

- 主要入口函数/类: <描述>
- 核心数据结构: <描述>
- 线程/并发假设: <描述>
- 错误处理策略: <描述>
- 扩展点: <描述>

---

## 代码特征

<客观记录模块涉及的技术特征，为下游风险分析提供索引>

### 内存管理

- **方式**: [RAII / 智能指针 / 手动管理 / 混合 / 无动态分配]
- **说明**: <可选，简要说明，如「使用 std::unique_ptr 管理资源」或「存在少量 malloc/free」>

### 并发模型

- **多线程**: [是 / 否]
- **同步机制**: [无 / mutex / atomic / 读写锁 / 条件变量 / 其他]
- **说明**: <可选，如「单线程模块」或「使用 std::mutex 保护共享状态」>

### I/O 操作

- **文件 I/O**: [是 / 否]
- **网络 I/O**: [是 / 否]
- **说明**: <可选，如「读取配置文件」或「监听 TCP 端口」>

### 外部数据处理

- **处理外部输入**: [是 / 否]
- **数据来源**: [无 / 网络 / 文件 / 命令行 / 环境变量 / 其他]
- **说明**: <可选，如「解析用户提交的 JSON 请求」>

### 错误处理

- **策略**: [返回错误码 / 异常 / 混合 / 断言 / 无明显处理]
- **说明**: <可选，如「使用 errno 风格错误码」或「抛出自定义异常」>

---

## 关键代码位置索引

<记录模块的关键入口点，便于快速定位>

### 主要入口点

| 函数/类          | 位置        | 说明       |
| ---------------- | ----------- | ---------- |
| <entry_function> | <file:line> | <简要说明> |
| <main_class>     | <file:line> | <简要说明> |

### 外部数据入口（若有）

| 入口            | 位置        | 数据来源           |
| --------------- | ----------- | ------------------ |
| <parse_input()> | <file:line> | <网络/文件/命令行> |

---

## 与其它模块的关系

<文字描述依赖方向，或 Mermaid 图>

例如：

- 本模块被：`app/main`、`service/handler` 依赖
- 本模块依赖：`core/utils`、`core/parser`

---

## 信息来源

<记录分析所依据的信息来源，便于追溯和验证>

| 类型       | 路径                            | 贡献内容             |
| ---------- | ------------------------------- | -------------------- |
| README     | <src/module/README.md 或「无」> | <职责描述、设计意图> |
| 测试文件   | <test/module_test.cpp 或「无」> | <边界条件、使用示例> |
| 头文件注释 | <src/module/module.h>           | <API 说明>           |
| 代码分析   | 静态分析                        | <依赖关系、复杂度>   |

---

## 使用示例

<提供可运行的代码示例，帮助读者快速理解模块用法>

### 基本用法

**来源**: [<test/basic_test.cpp:45-60> 或 Agent 编写]

```cpp
// 示例：初始化并使用模块
#include "<module>.h"

int main() {
    Module m;
    m.init(config);
    auto result = m.process(input);
    // 处理结果...
    return 0;
}
```
````

### 进阶用法（可选）

**来源**: [<examples/advanced.cpp> 或 Agent 编写]

```cpp
// 示例：高级配置或复杂场景
// ...
```

---

## 验证状态

<复杂度为「高」或「极高」时必填；复杂度「低」可省略；复杂度「中」建议填写>

- **验证等级**: [L0 / L1 / L2 / L3]（参见 [validation_levels](1-code-cognition/definitions/validation_levels.md)）
- **验证方式**: [静态分析 / 阅读测试 / 运行测试 / 探索性测试]
- **测试命令**: <若 L2/L3，填写实际执行的命令>
- **测试结果**: <X/Y 通过，或「全部通过」>
- **验证发现**:
  - 确认: <静态分析正确的点>
  - 修正: <需要修正的理解>
  - 新发现: <测试揭示的额外信息>

```

---

## 与 output_structure 的对应

- 必须章节与路径见 [产出路径与报告结构约定](1-code-cognition/definitions/output_structure.md)。
- **可选**：可在文档头部使用 YAML frontmatter，字段如 `summary`、`complexity`、`path`，便于 Agent 先扫再决定是否读全文。
```
