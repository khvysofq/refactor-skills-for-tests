# 风险类型定义

> **阅读时机**：Phase 01 定策略、Phase 02 做审查、撰写任务条目时。任务列表中的「风险类型」字段取值须与本定义一致。

---

## 与阶段一「代码特征」的对应关系

阶段一（代码认知）在模块报告中记录的「代码特征」为客观事实（如「使用 malloc/free」「涉及多线程」）；本阶段的风险类型用于对**疑似 BUG** 做分类判断，与代码特征的维度对齐，便于从知识库按特征筛模块后再按类型记任务。

| 代码特征维度（阶段一） | 风险类型（本阶段） | 典型问题 |
|------------------------|--------------------|----------|
| 内存管理               | 内存管理           | double-free、use-after-free、泄漏、缓冲区溢出 |
| 并发模型               | 并发竞态           | 数据竞争、死锁、未同步访问共享变量 |
| I/O 操作、外部数据处理 | I/O 与外部输入     | 未校验长度/格式、路径遍历、注入 |
| 错误处理               | 错误处理           | 未检查返回值、异常未处理、错误路径泄漏资源 |

---

## 风险类型枚举

任务条目的「风险类型」字段须从以下类型中选取（可后续扩展）：

| 类型 | 说明 | 典型模式/审查要点 |
|------|------|-------------------|
| **内存管理** | 与动态内存、缓冲区、生命周期相关 | malloc/free 成对、new/delete、RAII 是否完整、边界检查、野指针 |
| **并发竞态** | 多线程/多任务下的共享数据与同步 | 无锁访问共享变量、锁顺序、条件变量使用、原子性 |
| **I/O 与外部输入** | 来自文件/网络/命令行/配置的数据处理 | 长度校验、格式校验、信任边界、解析错误处理 |
| **错误处理** | 返回值、异常、错误路径 | 忽略返回值、异常未捕获、错误路径未释放资源、断言滥用 |
| **其它** | 难以归入上述类型的逻辑或实现问题 | 逻辑错误、类型/单位混用、配置错误等 |

---

## 使用说明

- Phase 01 确定分析范围时，可结合 overall_report 的「技术特征概览」选择要重点审查的风险类型与模块。
- Phase 02 深度审查时，按选定模块的「代码特征」定位代码，再按上述类型对每条疑似 BUG 标注「风险类型」。
- 撰写任务列表时，每条条目的「风险类型」必须从本枚举中选取，以便阶段三与后续统计一致。

---

**下一步**：返回调用此文档的 [Skill 01](2-risk-assessment/skills/skill-01-scope.md)、[Skill 02](2-risk-assessment/skills/skill-02-review.md) 或 [Phase 02](2-risk-assessment/phases/02-review.md)，完成范围设定或任务条目撰写。
